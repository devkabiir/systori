{% load i18n customformatting %}
<div class="editor">
  <div class="editor-row">
    <div class="code">{{ task.code }}</div>
    <div           class="name"  placeholder="{% trans 'task' %}"                                             contenteditable>{{ task.name|safe }}</div>
    <sys-task-cell class="qty"   placeholder="{% trans 'qty' %}"   data-canonical="{{ task.qty_equation }}"   contenteditable>{{ task.qty|ubrdecimal }}</sys-task-cell>
    <div           class="unit"  placeholder="{% trans 'unit' %}"                                             contenteditable>{{ task.unit }}</div>
    <sys-task-cell class="price"                                   data-canonical="{{ task.price_equation }}" contenteditable>{{ task.price|ubrdecimal }}</sys-task-cell>
    <sys-task-cell class="total" placeholder="{% trans 'total' %}" data-canonical="{{ task.total_equation }}" contenteditable>{{ task.total|ubrdecimal:3 }}</sys-task-cell>
    {% comment %}
    <div class="labels">
      <span class="is_optional {{ task.is_provisional }} label label-primary">{% trans 'Optional' %}</span>
    </div>
    {% endcomment %}
  </div>
  <div class="description" placeholder="{% trans 'description' %}" contenteditable>{{ task.description|safe }}</div>
</div>
<sys-lineitem-sheet>
  {% for lineitem in task.lineitems.all %}
    <sys-lineitem data-pk="{{ lineitem.pk }}">
      {% include "task/editor/lineitem_editor.html" with lineitem=lineitem %}
    </sys-lineitem>
  {% endfor %}
</sys-lineitem-sheet>
<div class="price-difference">
  <span class="glyphicon glyphicon-exclamation-sign"></span>
  <div class="name">{% trans 'Line items do not add up to the task price.' %}</div>
  <div class="total">{{ task.price_difference|ubrdecimal:3 }}</div>
  <div class="actions"></div>
</div>
